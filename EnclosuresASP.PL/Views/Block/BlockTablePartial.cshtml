@model List<EnclosuresASP.DAL.Entities.Block>

<table class="table table-striped">
    <tr>
        <th class="text-center">Название</th>
        <th class="text-center">УИД</th>
        <th class="text-center">Действия</th>
    </tr>
    @if (Model.Count() == 0)
    {
        <tr>
            <td colspan="3" class="text-center">Нет ни одного блока</td>
        </tr>
    }
    else
    {
        for (int i = 0; i < Model.Count(); i++)
        {
            <tr>
                <td class="text-center">
                    @Html.DisplayFor(modelItem => Model[i].BlockName.BlockName)
                </td>
                <td class="text-center">
                    @Html.DisplayFor(modelItem => Model[i].UID)
                </td>
                <td class="text-center">
                    @{
                        string editBtnName = "editBlockBtn" + i;
                        string deleteBtnName = "deleteBlockBtn" + i;
                        <button id=@editBtnName name=@editBtnName class="blockEditBtn k-primary" type="button" data-url="@Url.Action("EditBlock", "Enclosure", new { blocks = Json.Encode(Model), blockToEdit = Json.Encode(Model[i]) })">Редактировать</button>
                        <button id=@deleteBtnName name=@deleteBtnName class="blockDeleteBtn k-primary" type="button" data-url="@Url.Action("DeleteBlock", "Enclosure", new { blocks = Json.Encode(Model), blockToDelete = Json.Encode(Model[i]) })">Удалить</button>
                    }
                    
                    @*<script type="text/javascript">
                        $('.actionBtns').kendoButton().click(function () {
                            var url = $(this).data('url');
                            window.location.href = url;
                        });*@
                    @*</script>*@
                </td>
            </tr>
        }
    }
</table>

<script type="text/javascript">
    
    $('.blockDeleteBtn').kendoButton().click(function () {
        debugger;
        var url = $(this).data('url');
        window.location.href = url;
        $.get(url, function (data) {
            $('#blockModalBody').html(data);
            $('#blockModal').modal('show');
        });
    });
</script>